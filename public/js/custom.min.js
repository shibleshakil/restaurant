$(document).ready(function ($) {
    // Go to URL
    $('select.gotourl').on('change', function () {
        var url = $(this).val();
        if (url) { window.location = url; }
        return false;
    });
});

function reserveSelectedTime(url) {
    var restaurant = $("#book_restaurant").val();
    var restaurantName = $("#book_restaurant option:selected").text();
    var booking_date = $("#booking_date").val();
    var no_of_guest = $("#no_of_guest").val();
    var preferred_time = $("#preferred_time").val();

    $.ajax({
        url: url,
        type: "POST",
        data: {
            "_token": $("#csrfToken").val(),
            'restaurant': restaurant,
            'restaurantName': restaurantName,
            'booking_date': booking_date,
            'no_of_guest': no_of_guest,
            'preferred_time': preferred_time,
        },
        dataType: "json",

        success: function (data) {
            if (data.length > 0) {
                $.each(data, function (index, value) {
                    $("#bookedRestaurant").html(value['restaurantName']);
                    $("#bookedDate").html(value['booking_date']);
                    $("#bookedGuest").html(value['no_of_guest'] + ' guests ');
                    $("#bookedTime").html(value['preferred_time']);
                    $("#booking_step_1").hide();
                    $("#booking_step_2").show();
                });
            } else {
                console.log('Error');
            }
        },

        error: function (e) {
            console.log(e);
        }
    });
}

function checkResttaurantInfo(url, id, view1, view2) {
    $.ajax({
        url: url,
        type: "get",
        data: {
            "id": id,
        },
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
        success: function (data) {
            $(view1).removeAttr("disabled");
            $(view2).removeAttr("disabled");
            $("#booking_date").removeAttr("readonly");

            if (data['guest'].length > 0) {
                var output1 = '<option value="">Select No of Guest</option>';
                $.each(data['guest'], function (index, value) {
                    output1 += '<option value="' + value + '">' + value + '</option>';
                });
                output1 += '<option value="group">Large Group</option>';
            } else {
                var output1 = '<option value="">Fully Booked</option>';
            }
            $(view1).html(output1);

            if (data['times'].length > 0) {
                var output = '<option value="">Select Prefered Time</option>';
                $.each(data['times'], function (index, value) {
                    output += '<option value="' + value + '">' + value + '</option>';
                });
            } else {
                var output = '<option value="">No Prefered Time Found</option>';
            }
            $(view2).html(output);
        },

        error: function (e) {
            console.log(e);
        }
    });
}